<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>Document</title>
        <!-- jQuery -->
        <script type="text/javascript" charset="utf-8" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.cookie.js"></script>
        <!-- JavaScript용 네이버 아이디로 로그인 SDK -->
        <script type="text/javascript" charset="utf-8" src="https://static.nid.naver.com/js/naverLogin.js"></script>

    </head>
    <body>
        <!-- 네이버 아이디로 로그인 버튼 -->
        <div>
            <img src="naverlogin.png" width="231" height="50" id="NaverIdLoginBTN" />
        </div>

        <!-- Basic Setup -->
        <script type="text/javascript">
            function generateState() {
                // CSRF 방지를 위한 상태 토큰 생성 코드
                // 상태 토큰은 추후 검증을 위해 세션에 저장해야 합니다.
                var oDate = new Date();
                return oDate.getTime();
            }

            function saveState(state) {
                $.removeCookie("state_token");
                $.cookie("state_token", state);
            }

            // 개발자 센터에 내 애플리케이션을 등록할 때 발급받은 정보를 입력합니다.
            var naver = NaverAuthorize({
                client_id : "1mXyATXFPVwSTmdri_1P",
                client_secret : "zZYmP73krF",
                redirect_uri : "http://tech-at-naver.github.io/callback.html"
            });
            $("#NaverIdLoginBTN").click(function() {
                var state = generateState();
                saveState(state);
                naver.login(state);
            });
        </script>

    </body>
</html>
